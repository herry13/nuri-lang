{"type":"parallel","version":2,"actions":[{"name":"service2a.stop","parameters":{},"cost":1,"conditions":{"client.refer":"$service1a","service1a.state":"$State.running","service1b.state":"$State.running","service2a.state":"$State.running","service2b.state":"$State.running"},"effects":{"service2a.state":"$State.stopped"},"before":[],"after":[1,2,3,4]},{"name":"service2b.stop","parameters":{},"cost":1,"conditions":{"client.refer":"$service1a","service1a.state":"$State.running","service1b.state":"$State.running","service2a.state":"$State.stopped","service2b.state":"$State.running"},"effects":{"service2b.state":"$State.stopped"},"before":[0],"after":[2,3]},{"name":"service2b.upgrade","parameters":{"ver":2},"cost":1,"conditions":{"client.refer":"$service1a","service1a.state":"$State.running","service1b.state":"$State.running","service2a.state":"$State.stopped","service2b.state":"$State.stopped"},"effects":{"service2b.version":2},"before":[0,1],"after":[]},{"name":"service2b.start","parameters":{},"cost":1,"conditions":{"client.refer":"$service1a","service1a.state":"$State.running","service1b.state":"$State.running","service2a.state":"$State.stopped","service2b.state":"$State.stopped"},"effects":{"service2b.state":"$State.running"},"before":[0,1,2],"after":[4,5,6,7,8,9,10]},{"name":"service2a.start","parameters":{},"cost":1,"conditions":{"client.refer":"$service1a","service1a.state":"$State.running","service1b.state":"$State.running","service2a.state":"$State.stopped","service2b.state":"$State.running"},"effects":{"service2a.state":"$State.running"},"before":[0,1,2,3],"after":[5,6,7,8,9,10]},{"name":"client.redirect","parameters":{"s":"$service2a"},"cost":1,"conditions":{"service2a.state":"$State.running","service2b.state":"$State.running"},"effects":{"client.refer":"$service2a"},"before":[0,1,2,3,4],"after":[6,7,8,9,10]},{"name":"service1a.stop","parameters":{},"cost":1,"conditions":{"client.refer":"$service2a","service1a.state":"$State.running","service1b.state":"$State.running","service2a.state":"$State.running","service2b.state":"$State.running"},"effects":{"service1a.state":"$State.stopped"},"before":[0,1,2,3,4,5],"after":[7,8,9,10]},{"name":"service1b.stop","parameters":{},"cost":1,"conditions":{"client.refer":"$service2a","service1a.state":"$State.stopped","service1b.state":"$State.running","service2a.state":"$State.running","service2b.state":"$State.running"},"effects":{"service1b.state":"$State.stopped"},"before":[0,1,2,3,4,5,6],"after":[8,9]},{"name":"service1b.upgrade","parameters":{"ver":2},"cost":1,"conditions":{"client.refer":"$service2a","service1a.state":"$State.stopped","service1b.state":"$State.stopped","service2a.state":"$State.running","service2b.state":"$State.running"},"effects":{"service1b.version":2},"before":[3,4,5,6,7],"after":[]},{"name":"service1b.start","parameters":{},"cost":1,"conditions":{"client.refer":"$service2a","service1a.state":"$State.stopped","service1b.state":"$State.stopped","service2a.state":"$State.running","service2b.state":"$State.running"},"effects":{"service1b.state":"$State.running"},"before":[3,4,5,6,7,8],"after":[10,11]},{"name":"service1a.start","parameters":{},"cost":1,"conditions":{"client.refer":"$service2a","service1a.state":"$State.stopped","service1b.state":"$State.running","service2a.state":"$State.running","service2b.state":"$State.running"},"effects":{"service1a.state":"$State.running"},"before":[3,4,5,6,7,8,9],"after":[11]},{"name":"client.redirect","parameters":{"s":"$service1a"},"cost":1,"conditions":{"service1a.state":"$State.running","service1b.state":"$State.running"},"effects":{"client.refer":"$service1a"},"before":[6,7,8,9,10],"after":[]}]}
